<!DOCTYPE html>
<html lang="fr">
	<head>
		<link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta
			name="description"
			content="{{ page.description | default: site.description }}"
		/>
		<title>{{ page.title }}</title>
	</head>

	<body>
		{% include nav.html %}
		<main class="home">
			<div class="title">
				<h1>{{ page.title }}</h1>
				<div class="description" aria-label="Description du blog">
					{{ content }}
				</div>
			</div>

			<section class="latest-posts" aria-labelledby="latest-post">
				<h2 id="latest-post">Lire le dernier post</h2>
				<div class="latest-post" role="region" aria-labelledby="post-title">
					{% for post in site.posts limit:1 %}
					<article class="post-preview">
						{% if post.tags %} {% for tag in post.tags %}
						<span class="tag" role="tag">{{ tag }}</span>
						{% endfor %} {% endif %}
						<p class="post-meta">
							<time datetime="{{ post.date | date_to_xmlschema }}"
								>{{ post.date | date: "%B %-d, %Y" }}</time
							>
						</p>
						<h3 id="post-title">
							<a
								href="{{ post.url | relative_url }}"
								aria-label="Read more about {{ post.title }}"
								>{{ post.title }}</a
							>
						</h3>
						<p>{{ post.excerpt | strip_html | truncatewords: 50 }}</p>
					</article>
					{% if post.featured_image %}
					<a
						href="{{ post.url | relative_url }}"
						aria-label="Featured image for {{ post.title }}"
					>
						<img
							src="{{ post.featured_image | relative_url }}"
							alt="{{ post.title }}"
							loading="lazy"
						/>
					</a>
					{% endif %} {% endfor %}
				</div>
			</section>

			<section class="history" aria-labelledby="all-articles">
				<h3 id="all-articles">Tous les articles</h3>

				<div class="container">
					{% assign posts_by_year = site.posts | group_by_exp:"post", "post.date
					| date: '%Y'" %} {% for year in posts_by_year %}
					<div
						class="wrapper"
						role="region"
						aria-label="Posts from {{ year.name }}"
					>
						<span class="year">{{ year.name }}</span>
						<div class="post-list">
							{% for post in year.items %}
							<article class="post-preview">
								<time
									class="post-date"
									datetime="{{ post.date | date_to_xmlschema }}"
									>{{ post.date | date: "%b %-d" }}</time
								>
								<h5>
									<a
										href="{{ post.url | relative_url }}"
										aria-label="Read {{ post.title }}"
										>{{ post.title }}</a
									>
								</h5>
							</article>
							{% endfor %}
						</div>
					</div>
					{% endfor %}
				</div>
			</section>
		</main>
		{% include footer.html %}
	</body>
</html>
